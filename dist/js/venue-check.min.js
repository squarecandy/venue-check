jQuery((function(e){const n={progress:null,multiVenueEnabled:!1,venueSelectArray:["#saved_tribe_venue"],venueSelect:"#saved_tribe_venue",batchsize:150,recurrence_warning_limit:300,storedRecurrences:{origFormRecur:null,recurrences:null},showExclusions:!!venuecheck.show_exclusions&&venuecheck.show_exclusions,origForm:null,init(){n.multiVenueEnabled=!!venuecheck.multivenue&&venuecheck.multivenue,n.debugLog("In Multivenue mode? ",n.multiVenueEnabled,typeof n.multiVenueEnabled),n.debugLog("venuecheck variables",venuecheck),["batchsize","recurrence_warning_limit"].forEach(e=>{venuecheck[e]=parseInt(venuecheck[e],10),isNaN(venuecheck[e])||(n[e]=venuecheck[e])}),n.multiVenueEnabled&&(venuecheck.use_tec_fields?(n.venueSelectArray=["#saved_tribe_venue","#venuecheck-additional-venues select"],n.venueSelect=n.venueSelectArray.join(", ")):(n.venueSelect="#acf-"+venuecheck.fieldkey,n.venueSelectArray=[n.venueSelect])),window.addEventListener("load",c=>{venuecheck.debug&&console.log("load event fire",c),setTimeout((function(){const c=e("form#post");n.origForm=c.serialize(),venuecheck.debug&&(console.log("check form change status after 3 seconds"),console.log("is same as current state?",c.serialize()===n.origForm)),e(document).on("change","body.venuecheck-update #EventInfo :input,body.venuecheck-update #EventInfo .tribe-dropdown,body.venuecheck-update #EventInfo .tribe-button-field",(function(){c.serialize()!==n.origForm?(n.debugLog("form changed, show msg"),n.venuecheck_show_modified_msg()):(n.debugLog("form changed, hide msg"),n.venuecheck_hide_modified_msg())})),e(document).on("click","body.venuecheck-update .tribe-row-delete-dialog .ui-dialog-buttonpane .ui-dialog-buttonset .button-red",(function(){n.venuecheck_show_modified_msg()}))}),3e3)}),n.waitForElementToDisplay(n.venueSelectArray[0],(function(){n.debugLog(n.venueSelectArray[0]+" is loaded"),n.eventTribeVenueLoaded()}),1e3,9e3),n.waitForElementToDisplay("#tribe_events_event_details",(function(){n.debugLog("#tribe_events_event_details is loaded"),n.tribeEventsEventDetailsLoaded()}),1e3,9e3),e("#allDayCheckbox").click((function(){n.venuecheck_show_hide_offsets()})),["EventStartDate","EventStartTime","allDayCheckbox"].forEach(e=>{document.getElementById(e).tabIndex>1&&(document.getElementById(e).tabIndex=0)}),n.multiVenueEnabled&&jQuery("#acf-field_61dgdie0eee3e").on("select2:open",(function(){const e=new window.MutationObserver((function(e,n){let c=[];jQuery("#select2-acf-field_61dgdie0eee3e-results li").each((function(){c.push({name:this.innerText,html:this.outerHTML})})),c.sort((e,n)=>e.name.localeCompare(n.name)),c=jQuery.map(c,e=>e.html),c=c.join(""),jQuery("#select2-acf-field_61dgdie0eee3e-results")[0].innerHTML=c,n.disconnect()})),n=document.getElementById("select2-acf-field_61dgdie0eee3e-results");e.observe(n,{childList:!0})}))},tribeEventsEventDetailsLoaded(){e("#tribe_events_event_details").addClass("venuecheck-updated")},eventTribeVenueLoaded(){n.debugLog("eventTribeVenueLoaded"),e(document).on("click","#venuecheck-conflicts-button, #venuecheck-conflicts-link, #venuecheck-report-conflicts-link, #venuecheck-modified",(function(){n.venuecheck_find_available_venues()}));const c=n.multiVenueEnabled?e(venuecheck.container_id+" tbody").first():e("#event_tribe_venue tbody").first(),t=c.find("tr.saved-linked-post > td").last();venuecheck.debug&&(console.log("$venuecheckVenueSection",c),console.log("$venueDropdown",t)),c.addClass("venuecheck-section"),c.children("tr").first().before('<tr><td colspan="2" class="venuecheck-section-label">Venue Check<i class="fas fa-spinner fa-pulse venuecheck-preload"></i></td></tr>'),t.wrapInner('<div id="venuecheck-venue-select"></div>'),t.append('<button id="venuecheck-conflicts-button" class="button" type="button" type="button">Find available venues</button>'),c.find(".edit-linked-post-link").after('<div id="venuecheck-change-venue" style="display: none;"><button id="venuecheck-conflicts-link" class="button" type="button">Change Venue</button></div>'),e("body").hasClass("venuecheck-new")?e("#venuecheck-conflicts-button").show():e(n.venueSelect).val().length?e("#venuecheck-conflicts-button").hide():e("#venuecheck-conflicts-button").css("display","inline-block"),n.venuecheck_toggle_readonly(!0),e(n.venueSelect).prop("autocomplete","off"),e(".edit-linked-post-link").hide(),e("#venuecheck-change-venue").show(),n.venuecheck_show_hide_offsets(),n.venuecheck_show_hide_divider()},venuecheck_check_stored_recurrences(){if(n.debugLog("checking storedRecurrences",n.storedRecurrences),n.storedRecurrences&&n.storedRecurrences.recurrences&&n.storedRecurrences.origFormRecur===n.get_recurrence_form_data())n.venuecheck_disable_form(),n.venuecheck_hide_wait(),venuecheck.debug&&console.log("venuecheck_check_stored_recurrences have not changed"),n.venuecheck_check_venues(n.storedRecurrences.recurrences,n.batchsize);else{venuecheck.debug&&console.log("recurrences stored but recurrence changed?",n.storedRecurrences&&n.storedRecurrences.origFormRecur&&n.storedRecurrences.origFormRecur!==n.get_recurrence_form_data());const e=n.get_recurrence_form_data();n.debugLog("recurrenceFormData",e),n.storedRecurrences.recurrences=null,n.storedRecurrences.origFormRecur=e,n.debugLog("storing Recurrences",n.storedRecurrences.origFormRecur),n.venuecheck_get_event_recurrences()}},get_recurrence_form_data(){const c=e(".recurrence-row input, .custom-recurrence-row input, .recurrence-row select, .custom-recurrence-row select,.tribe-datetime-block input").serialize();return n.debugLog("getting recurrence form",c),c},venuecheck_get_event_recurrences(){const c={};e.each(e("form#post").serializeArray(),(function(e,n){c[n.name]=n.value})),!0===e("#allDayCheckbox").prop("checked")&&(c.EventStartTime="00:00:00",c.EventEndTime="23:59:59");const t=c.EventStartTime;venuecheck.debug&&console.log("start",t);const s=c.EventEndTime,o=n.venuecheck_convert_time(t),r=n.venuecheck_convert_time(s),u=[],i={eventStart:c.EventStartDate+" "+o,eventEnd:c.EventEndDate+" "+r,eventTimezone:c.EventTimezone,eventOffsetStart:c._venuecheck_event_offset_start,eventOffsetEnd:c._venuecheck_event_offset_end};u.push(i);const a=e("form#post").serialize();if(n.venuecheck_disable_form(),venuecheck.debug&&console.log("nonce: "+venuecheck.nonce),void 0!==c["is_recurring[]"])return n.venuecheck_show_wait(),venuecheck.debug&&console.log("RECURRING EVENT"),e.ajax({type:"POST",url:venuecheck.ajax_url,dataType:"json",data:{action:"venuecheck_get_event_recurrences",nonce:venuecheck.nonce,post_data:a}}).done((function(c){if(e.merge(u,c),venuecheck.debug&&(console.log("=====/////RECURRENCES-RECURRING/////====="),console.log(u),console.log("=====/////RECURRENCES-RECURRING/////=====")),u.length>n.recurrence_warning_limit){n.venuecheck_hide_wait();const c=u.length;e("#venuecheck-messages-container").addClass("has-messages"),e("#venuecheck-messages-container, #venuecheck-recurrence-warning").show(),e("#venuecheck-recurrence-count").text(c),e("#venuecheck-recurrence-warning-cancel").unbind().click((function(){return e("#venuecheck-messages-container, #venuecheck-recurrence-warning").hide(),n.venuecheck_enable_form(),!1})),e("#venuecheck-recurrence-warning-continue").unbind().click((function(){e("#venuecheck-messages-container, #venuecheck-recurrence-warning").hide(),venuecheck.debug&&console.log("get_event_recurrences recurring - post warning -> check_venues"),n.venuecheck_check_venues(u,n.batchsize)}))}else n.venuecheck_hide_wait(),venuecheck.debug&&console.log("get_event_recurrences recurring - no warning -> check_venues"),n.venuecheck_check_venues(u,n.batchsize)})).fail((function(e,n,c){console.error("ajax error: "+c)}));venuecheck.debug&&(console.log("=====/////RECURRENCES/////====="),console.log(u),console.log("=====/////RECURRENCES/////=====")),n.venuecheck_hide_wait(),venuecheck.debug&&console.log("get_event_recurrences - not recurring -> check_venues"),n.venuecheck_check_venues(u,n.batchsize)},venue_check_ajax_call_combined:c=>(venuecheck.debug&&console.log("RECURRING EVENT"),e.ajax({type:"POST",url:venuecheck.ajax_url,dataType:"json",data:{action:"venuecheck_get_event_recurrences",nonce:venuecheck.nonce,post_data:c}}).done((function(e){venuecheck.debug&&(console.log("=====/////CONFLICTS-RECURRING/////====="),console.log(e),console.log("=====/////CONFLICTS-RECURRING/////=====")),venuecheck.debug&&console.log("ajax_call_combined => handle_check_venues_response"),n.venuecheck_handle_check_venues_response(e)})).fail((function(e,n,c){console.error("ajax error: "+c)}))),venuecheck_get_event_recurrences_direct(){const c={};e.each(e("form#post").serializeArray(),(function(e,n){c[n.name]=n.value})),!0===e("#allDayCheckbox").prop("checked")&&(c.EventStartTime="00:00:00",c.EventEndTime="23:59:59");const t=c.EventStartTime;venuecheck.debug&&console.log("start",t);const s=c.EventEndTime,o=n.venuecheck_convert_time(t),r=n.venuecheck_convert_time(s),u=[],i={eventStart:c.EventStartDate+" "+o,eventEnd:c.EventEndDate+" "+r,eventTimezone:c.EventTimezone,eventOffsetStart:c._venuecheck_event_offset_start,eventOffsetEnd:c._venuecheck_event_offset_end};u.push(i);const a=e("form#post").serialize();if(n.venuecheck_disable_form(),venuecheck.debug&&console.log("nonce: "+venuecheck.nonce),void 0!==c["is_recurring[]"]){let c="",t=!1;const s=jQuery(".tribe-event-recurrence-description")[0].innerText;if(s.includes("repeating indefinitely"))t=!0;else{const e="happening",n="times";let t=s.search(e),o=s.search(n);t>0&&o>0&&(t+=e.length,o-=t,c=s.substr(t,o).trim())}n.debugLog("recurrences_num",c,"showWarning",t),t||c>n.recurrence_warning_limit?(e("#venuecheck-messages-container").addClass("has-messages"),e("#venuecheck-messages-container, #venuecheck-recurrence-warning").show(),e("#venuecheck-recurrence-count").text(c),e("#venuecheck-recurrence-warning-cancel").unbind().click((function(){return e("#venuecheck-messages-container, #venuecheck-recurrence-warning").hide(),n.venuecheck_enable_form(),!1})),e("#venuecheck-recurrence-warning-continue").unbind().click((function(){e("#venuecheck-messages-container, #venuecheck-recurrence-warning").hide(),venuecheck.debug&&console.log("get_event_recurrences_direct recurring - warning -> check_ajax_combined"),n.venuecheck_show_progress_bar(),n.venuecheck_check_venues_progress(0,100),n.venue_check_ajax_call_combined(a)}))):(venuecheck.debug&&console.log("get_event_recurrences_direct recurring - no warning -> check_ajax_combined"),n.venuecheck_show_progress_bar(),n.venuecheck_check_venues_progress(0,100),n.venue_check_ajax_call_combined(a))}else venuecheck.debug&&(console.log("=====/////RECURRENCES/////====="),console.log(u),console.log("=====/////RECURRENCES/////=====")),n.venuecheck_hide_wait(),venuecheck.debug&&console.log("get_event_recurrences_direct - not recurring -> check_venues"),n.venuecheck_check_venues(u,n.batchsize)},venuecheck_check_venues(c,t){n.venuecheck_show_progress_bar(),n.storedRecurrences.recurrences=c;const s=e("#post_ID").val(),o=[];for(let e=0;e<c.length;e+=t)venuecheck.debug&&console.log("venuecheck_check_venues i: "+e),o.push(c.slice(e,e+t));let r=[];return o.reduce((function(u,i){const a=c.length,l=o.indexOf(i);return u.then((function(){return venuecheck.debug&&console.log("nonce: "+venuecheck.nonce),e.ajax({type:"POST",dataType:"json",url:venuecheck.ajax_url,data:{action:"venuecheck_check_venues",nonce:venuecheck.nonce,event_recurrences:i,postID:s,total_count:a,batch_size:t,batch_count:l},beforeSend(){const e=Math.max(0,(l+1)*t-a),c=Math.round(l*t/a*100),s=Math.round(((l+1)*t-e)/a*100);o.length>1&&n.venuecheck_check_venues_progress(c,s),n.venuecheck_toggle_readonly(!0)}}).then((function(e){venuecheck.debug&&console.log("venuecheck_check_venues ajax return data:",e),r=r.concat(e)}))}))}),Promise.resolve()).then((function(){n.venuecheck_handle_check_venues_response(r)}))},venuecheck_handle_check_venues_response(c){const t=Object.values(c.reduce((function(e,n){return e[n.venueTitle]?(e[n.venueTitle].events=e[n.venueTitle].events.concat(n.events),!e[n.venueTitle].series&&n.series?e[n.venueTitle].series=n.series:e[n.venueTitle].series&&n.series&&(e[n.venueTitle].series=Object.assign(e[n.venueTitle].series,n.series))):e[n.venueTitle]=n,e}),{}));venuecheck.debug&&console.log("CONFLICTS",c),c=t,venuecheck.debug&&console.log("CONFLICTS MERGED",c),clearTimeout(n.progress),e("#venuecheck-progress .progress-bar span").css({width:"100%"}),e(".venuecheck-progress-percent-done").text("100%"),setTimeout((function(){n.venuecheck_check_venues_handler(c)}),500)},venuecheck_check_venues_progress(c,t){if(clearTimeout(n.progress),venuecheck.debug&&console.log("check_venues_progress percent: "+c),e("#venuecheck-progress .progress-bar span").css({width:c+"%"}),e(".venuecheck-progress-percent-done").text(c+"%"),(c+=Math.floor(5*Math.random()+1))<=t){const e=Math.floor(1500*Math.random()+300);n.progress=setTimeout((function(){n.venuecheck_check_venues_progress(c,t)}),e)}else 100===t&&(e("#venuecheck-progress .progress-bar span").css({width:"100%"}),e(".venuecheck-progress-percent-done").text("100%"))},venuecheck_check_venues_handler(c){e("body").addClass("venuecheck-update"),e("#venuecheck-conflicts-button").hide(),venuecheck.debug&&console.log("starting venuecheck_check_venues_handler");const t=e(n.venueSelect).find("option, optgroup"),s=[{}];venuecheck.debug&&console.log("venuecheck_venues",t),n.multiVenueEnabled||t.each((function(){"My Venues"!==e(this).attr("label")&&"My Venues"!==e(this).parent().attr("label")||e(this).remove(),"Available Venues"===e(this).attr("label")&&(e(this).parent().append(e(this).html()),e(this).remove())}));let o="",r="",u=null,i=null,a=0;const l={};if(void 0!==c&&0!==c.length){r+='<div id="venuecheck-conflicts-report-container">',r+='<div id="venuecheck-report-links">',r+='<button id="venuecheck-report-conflicts-link" type="button">Recheck for Venue Conflicts</button>',r+='<span class="venuecheck-divider">&nbsp;|&nbsp;</span>',r+='<button id="venuecheck-conflicts-report-close" type="button">Close</button>',r+="</div>",r+='<table id="venuecheck-conflicts-report-table" class="venuecheck-conflicts-report-table">',r+="</table></div>",u=e(r),venuecheck.debug&&console.log("venuecheck_conflicts",c,e.type(c)),venuecheck.debug&&console.log("venuecheck_venue_options",s),e(n.venueSelect+" option").attr("disabled",!1),e.each(c,(function(c,t){if(venuecheck.debug&&console.log("venue:",c,t.venueID,t),!this.excluded){const c=e(n.venueSelect+' option[value="'+t.venueID+'"]');c.attr("disabled","disabled"),c[0].selected&&(l[t.venueID]=t.venueTitle),c[0].selected=!1}const s=e(n.generate_venue_report(t));if(this.series){const n=this.venueID;e.each(this.series,(function(){const e="series-"+n+"-"+this.id,c=s.find("."+e).first();c.addClass("first");const t=s.find("."+e+":not(.first)");t.length&&c.addClass("accordion"),c.attr("data-series",e),c.find(".venuecheck-conflicts-report-venue-date").prepend('<i class="fa-sync-alt fas" aria-hidden="true"></i>'),c.find(".venuecheck-conflicts-report-venue-event a").after('<span class="recurrence">'+this.recurrence+"</span>"),c.after(t),t.hide()}))}this.excluded?(n.showExclusions&&(i||(i=e('<table id="venuecheck-exclusions-report-table" class="venuecheck-conflicts-report-table" style="display:none"></table>')),i.append(s)),a++):u.find("#venuecheck-conflicts-report-table").append(s)})),n.multiVenueEnabled?e(n.venueSelect).trigger("change"):e("#saved_tribe_venue").select2(),n.debugLog("count conflicts",a),n.debugLog("count exclusions",a);const t=Object.keys(c).length-a;n.debugLog("venuecheck_conflicts_count",t),o+='<div id="venuecheck-conflicts-report-count" class="venuecheck-notice notice-info">';const v=Object.keys(l).length;if(v){const e=Object.values(l);o+='<div class="deselected-warning">',o+=v>2?e.slice(0,-1).join(", ")+", and "+e[e.length-1]+" have":2===v?e.join(" and ")+" have":e[0]+" has",o+=" been deselected because you changed the date and time to conflict with an existing event in this venue.</div>"}o+='<div class="count-unavailable"><span id="vc-report-link-desc">',o+=t?t+(1===t?" unavailable venue.":" unavailable venues."):"All venues are available.",o+='</span><button id="venuecheck-conflicts-report-link" aria-labelledby="#vc-report-link-desc" type="button">Show Details</button></div>',a&&n.showExclusions&&(o+='<div class="count-exclusions"><span>',o+=a,o+=1===a?" venue is available but has ":" venues are available but have ",o+="overlapping bookings.</span>"),o+="</div>"}else 0===c.length&&(o+='<div id="venuecheck-conflicts-report-count" class="venuecheck-notice notice-info">All venues are available.</div>',r+="",e(n.venueSelect+" option").attr("disabled",!1),n.multiVenueEnabled?e(n.venueSelect).trigger("change"):e("#saved_tribe_venue").select2());e("#venuecheck-messages").append(o),e("#venuecheck-conflicts-report").append(u),a&&n.showExclusions&&(e("#venuecheck-conflicts-report-container").append('<div id="venuecheck-show-exclusions"><button type="button"><span>Show</span> available venues with overlapping bookings</button></div>'),e("#venuecheck-conflicts-report-container").append(i)),e("#venuecheck-conflicts-report").show(),e("#venuecheck-conflicts-report-link, #venuecheck-conflicts-report-close").on("click",(function(){e("#venuecheck-report-container").slideToggle("fast"),e("#venuecheck-conflicts-report-link").html("Show Details"===e("#venuecheck-conflicts-report-link").text()?"Hide Details":"Show Details")})),e("tr.accordion .venuecheck-conflicts-report-venue-date i.fa-sync-alt.fas").on("click",(function(){const n=e(this).parents("tr.recurring.first").attr("data-series");e(this).parents("tr.recurring").toggleClass("open"),e(this).parents("tbody").find("tr.recurring."+n+":not(.first)").toggle()})),e("#venuecheck-show-exclusions a").on("click",(function(n){n.preventDefault();const c=e("#venuecheck-exclusions-report-table"),t=e(this);c.is(":visible")?(t.find("span").text("Show"),c.hide()):(t.find("span").text("Hide"),c.show())})),e("#venuecheck-venue-select").show(),e("#venuecheck-processing, #venuecheck-progress").hide(),e("#venuecheck-conflicts-link").removeClass("venuecheck-disabled"),e("#publish").prop("disabled",!1),n.venuecheck_toggle_readonly(!1),e("#venuecheck-change-venue").hide(),e("body").addClass("venuecheck-venues"),n.venuecheck_enable_form()},generate_venue_report(n){const c=[];let t='<thead class="venuecheck-conflicts-report-venue-title"><tr><td colspan="2">'+n.venueTitle+"</td></tr></thead>";return t+='<thead class="venuecheck-conflicts-report-venue-heading"><tr><td>Date</td><td>Event</td></tr></thead><tbody>',e.each(n.events,(function(e,s){const o="event-"+n.venueID+"-"+s.eventID;if(!c.includes(s.eventID)){c.push(s.eventID);const e=s.eventID;s.eventParent?(s.eventClass="recurring",s.eventClass+=" series-"+n.venueID+"-"+s.eventParent):n.series&&n.series.eventID&&(s.eventClass="recurring",s.eventClass+=" series-"+n.venueID+"-"+e),t+='<tr id="'+o+'"class="'+s.eventClass+'"><td class="venuecheck-conflicts-report-venue-date">'+s.eventDate+'</td><td class="venuecheck-conflicts-report-venue-event"><a href="'+s.eventLink+'" target="_blank" class="venuecheck-report-link"><span class="name">'+s.eventTitle+'</span><i class="fas fa-external-link-alt" aria-hidden="true"></i></a></td></tr>'}})),t},venuecheck_convert_time(e){if(!e)return"00:00:00";let n=0;const c=e.match(/^(\d+)/);c&&1 in c&&(n=Number(c[1]));let t=0;const s=e.match(/:(\d+)/);s&&1 in s&&(t=Number(s[1]));const o=e.substr(-2).toLowerCase();"pm"===o&&n<12&&(n+=12),"am"===o&&12===n&&(n-=12);let r=n.toString(),u=t.toString();return n<10&&(r="0"+r),t<10&&(u="0"+u),r+":"+u+":00"},venuecheck_show_hide_offsets(){!0===e("#allDayCheckbox").prop("checked")?(e("#venuecheck-offsets").hide(),e("#_venuecheck_event_offset_start").val("0"),e("#_venuecheck_event_offset_end").val("0")):e("#venuecheck-offsets").show()},venuecheck_show_modified_msg(){e("#venuecheck-messages-container, #venuecheck-modified-publish, #venuecheck-modified").show(),e("#venuecheck-report-container, #venuecheck-conflicts-report-count, #venuecheck-progress").hide(),e("#publish").prop("disabled",!0),e("input#save-post").prop("disabled",!0),n.venuecheck_toggle_readonly(!0),e("#venuecheck-change-venue").show()},venuecheck_hide_modified_msg(){e("#venuecheck-messages-container, #venuecheck-modified-publish, #venuecheck-modified").not(".active").hide(),e("#venuecheck-messages-container.has-messages, #venuecheck-conflicts-report-count").show(),e("#publish").prop("disabled",!1),e("input#save-post").prop("disabled",!1),e("body").hasClass("venuecheck-venues")&&(e("#venuecheck-messages-container").show(),e("#venuecheck-report-container").hide(),e("#venuecheck-conflicts-report-link").text("Show Details"),n.venuecheck_toggle_readonly(!1))},venuecheck_toggle_readonly(c){c?e(n.venueSelect).prop("readonly",!0).addClass("readonly"):e(n.venueSelect).prop("readonly",!1).removeClass("readonly")},venuecheck_show_wait(){e("#venuecheck-messages-container").addClass("has-messages"),e("#venuecheck-messages-container, #venuecheck-wait").show()},venuecheck_hide_wait(){e("#venuecheck-messages-container").removeClass("has-messages"),e("#venuecheck-messages-container, #venuecheck-wait").hide()},venuecheck_hide_messages(){e("#venuecheck-conflicts-report-count, #venuecheck-conflicts-report-container").remove(),e("#venuecheck-report-container,#venuecheck-messages-container,#venuecheck-modified-publish,#venuecheck-modified,#venuecheck-conflicts-report").hide(),e("#venuecheck-messages-container").removeClass("has-messages")},venuecheck_disable_form(){e(n.venueSelect).prop("readonly",!0).addClass("readonly").addClass("venuecheck-preserve-disabled"),e(".tribe-datetime-block :input:disabled").addClass("venuecheck-preserve-disabled"),e("#publish").prop("disabled",!0),e("input#save-post").prop("disabled",!0),e(".tribe-datetime-block :input").prop("disabled",!0),e("#tribe_events_event_details a").not("#venuecheck-cancel, #venuecheck-recurrence-warning-continue, #venuecheck-recurrence-warning-cancel, .select2-choice").addClass("venuecheck-disabled")},venuecheck_enable_form(){for(const c of n.venueSelectArray)e(c+":not(.venuecheck-preserve-disabled)").prop("readonly",!1).removeClass("readonly");e(".tribe-datetime-block :input:not(.venuecheck-preserve-disabled)").prop("disabled",!1),e(n.venueSelect).removeClass("venuecheck-preserve-disabled"),e(".tribe-datetime-block :input").removeClass("venuecheck-preserve-disabled"),e("#publish").prop("disabled",!1),e("input#save-post").prop("disabled",!1),e("#tribe_events_event_details a").removeClass("venuecheck-disabled"),n.origForm=e("form#post").serialize()},venuecheck_show_progress_bar(){e("#venuecheck-progress .progress-bar span").css({width:"0%"}),e(".venuecheck-progress-percent-done").text("0%"),e("#venuecheck-messages-container, #venuecheck-progress").show()},venuecheck_find_available_venues(){n.venuecheck_hide_messages(),"1"===venuecheck.combine_ajax?(n.debugLog("find_available_venues -> get_event_recurrences_direct"),n.venuecheck_get_event_recurrences_direct()):(n.debugLog("find_available_venues -> check_stored_recurrences"),n.venuecheck_show_wait(),n.venuecheck_check_stored_recurrences())},venuecheck_show_hide_divider(){""===e("#saved_tribe_venue").val()?e("#venuecheck-change-venue .venuecheck-divider").hide():e("#venuecheck-change-venue .venuecheck-divider").show()},debugLog(e,n=""){venuecheck.debug&&console.log(e,n)},waitForElementToDisplay(e,n,c,t){const s=Date.now();!function o(){null!==document.querySelector(e)?n():setTimeout((function(){t&&Date.now()-s>t||o()}),c)}()}};n.init()}));